# 补充：用Administration mode-Windows PowerShell输入wsl --shutdown后，用Windows PowerShell打不开wsl。需要在Administration mode-Windows PowerShell输入wsl -d Ubuntu-24.04，才能用Windows PowerShell打开wsl

cs-study 学习仓库日常操作清单（WSL 专属）
更新时间：2026-01-03
适配场景：个人学习仓库，本地修改 → 远程推送 → 双重备份核心保障：git acp 别名强制推送，本地版本永远覆盖远程网页误操作

# 一、核心流程：本地修改 → 推送 → 备份（每日 / 每次学习必做）
## 步骤 1：进入仓库 + 本地修改文件
```bash
# 1. 固定进入学习仓库目录（无需记忆其他路径）
cd ~/cs-study

# 2. 编辑文件（二选一：终端 Vim / 图形化 VS Code）
vim c-notes/pointer.md  # 终端编辑，适合快速修改
code .                  # VS Code 打开仓库，需安装 WSL 插件，图形化编辑更便捷

# 3. 查看修改状态（验证文件变更，已配置别名 git st）
git st  # 已配置的别名，等价于 git status -s
# 输出说明：M 文件名 = 已修改；?? 文件名 = 新文件未跟踪
```
## 步骤 2：一键提交 + 强制推送（核心命令，无需额外操作）
```bash
cd ~/cs-study
# 提交备注格式：【学习模块】知识点描述（方便后续回溯学习轨迹）
git acp "【C语言】指针与数组的关联知识点整理"
git acp "【Python】NumPy 矩阵运算示例代码补充"
# 成功标志：终端无错误，最后一行含 "To github.com:dao019/cs-study.git ... main -> main"
# 验证远程（可选）：打开 GitHub 仓库网页，确认提交备注和文件内容一致
```
## 步骤 3：双重备份（远程仓库 + Windows 本地备份，双重保障数据安全）
### （1）远程备份：依赖 GitHub 仓库（自动完成，无需额外操作）
执行 git acp 后，本地内容已同步到远程，GitHub 会自动保存提交历史和版本记录。
(可选)
利用 GitHub 仓库的 Release 功能，每月标记一次 “学习进度版本”（如 v1.0-202601）：
本地提交推送完成后，打开 GitHub 仓库网页
点击顶部 Releases → Create a new release
填写版本号（如 v1.0）和标题（如 1月学习进度：C语言基础+Python科学计算）
点击 Publish release，完成远程版本备份
### （2）Windows 本地备份：防止 WSL 磁盘损坏（推送到远程后执行，或每周固定执行）
```bash
# 1. 提前创建 Windows 备份目录（仅需执行一次，手动在 D 盘创建：D:/Linux-wsl/local-backup）
# 2. WSL 中执行备份命令（一键复制整个仓库到 Windows D 盘）
cp -r ~/cs-study /mnt/d/Linux-wsl/local-backup
echo "本地备份完成！备份路径：D:/Linux-wsl/local-backup"
```

# 二、仓库轻量维护（可选，每周 / 每月一次，适合学习进阶）
## 1. 查看学习提交日志（回顾学习轨迹，已配置别名 git lg）
```bash
git lg          # 查看所有提交日志，带分支图和简洁格式
git lg -10      # 查看最近 10 次提交（快速回顾近期学习内容）
git last        # 查看最后一次提交的详细修改记录（已配置别名 git last）
```
## 2. 分支管理（学习新知识点时使用，避免污染主分支）
```bash
# 1. 创建并切换到新分支（如：学习 C++ 基础，已配置别名 git cb）
git cb feature/cpp-basic

# 2. 在新分支中修改、提交（仅本地提交，不推送远程，适合临时测试）
git ac "【C++】类与对象基础笔记"  # 已配置别名 git ac，仅提交不推送

# 3. 推送新分支到远程（可选，需关联远程分支）
git push --set-upstream origin feature/cpp-basic

# 4. 切换回主分支 + 合并新分支内容 + 强制推送主分支
git co main  # 已配置别名 git co，切换回主分支
git merge feature/cpp-basic  # 合并新分支内容到主分支
git pf       # 已配置别名 git pf，强制推送主分支到远程

# 5. 清理本地无用分支（可选，保持仓库整洁）
git br       # 查看所有分支（已配置别名 git br）
git branch -d feature/cpp-basic  # 删除已合并的无用分支
```
## 3. 优化仓库体积（可选，仓库文件过大时执行）
```bash
# 1. 清理 Git 缓存中的大文件（如视频、压缩包）
git gc --aggressive --prune=all

# 2. 查看仓库体积
du -sh ~/cs-study
```

# 三、推送错误快速排查手册（遇到问题直接查，一键解决）
| 错误现象 | 核心原因 | 一键解决命令（WSL 中直接复制执行） |
|-------|--------|------------|
| **fatal: 无效的引用规格：'备注内容'** | git acp 别名语法错误，提交备注被错误识别为分支名 | 1. 重新配置正确别名：git config --global alias.acp '!f() { git add . && git commit -m "$1" && git push --force-with-lease origin main; }; f' <br>2. 手动推送已提交内容：git pf |
| **您的分支领先 'origin/main' 共 1 个提交** | 本地提交成功，但推送失败（别名配置错误 / 网络问题） | 1. 执行手动强制推送：git pf <br>2. 若仍失败，检查别名配置：git config --global --get alias.acp |
| **remote: Repository not found.** | 远程仓库 origin 地址配置错误 / SSH 密钥未配置 | 1. 重新设置远程地址（SSH 协议，与你当前一致）：git remote set-url origin git@github.com:dao019/cs-study.git <br>2. 或改用 HTTPS 协议（无需 SSH 密钥，更稳定）：git remote set-url origin https://github.com/dao019/cs-study.git |
| **Permission denied (publickey).** | SSH 密钥未添加到 GitHub 账户 | 1. 生成 SSH 密钥（一路回车，无需设置密码）：ssh-keygen -t rsa -b 4096 -C "你的邮箱地址" <br>2. 复制公钥内容（后续粘贴到 GitHub）：cat ~/.ssh/id_rsa.pub <br>3. GitHub 配置：Settings → SSH and GPG keys → New SSH key → 粘贴公钥保存 |
| **无文件要提交，干净的工作区** | 本地无修改，或修改的文件被 .gitignore 忽略 | 1. 查看 Git 忽略文件列表：cat .gitignore <br>2. 若需跟踪被忽略的文件：git add -f 被忽略的文件名 |

# 四、关键注意事项（避免踩坑，必看）
## 1.禁止网页操作：即使 GitHub 网页显示编辑按钮，也绝对不要在网页上修改 / 删除文件，依赖 git acp 的强制推送机制，本地版本会自动覆盖远程误操作。
## 2.别名分支适配：若你的主分支不是 main 而是 master，需将所有别名中的 origin main 替换为 origin master（如 git acp、git pf 别名）。
## 3.强制推送仅限个人仓库：git acp 和 git pf 中的 --force-with-lease 仅适用于个人学习仓库，多人协作仓库禁止使用，否则会覆盖他人提交。
## 4.备份优先级：GitHub 远程仓库是主要备份，Windows 本地备份是灾难恢复备份（用于 WSL 磁盘损坏、GitHub 仓库误删等极端场景）。
## 5.提交备注规范：建议统一格式为 【学习模块】知识点描述，方便后续用 git lg 快速检索学习轨迹（如 【线性代数】矩阵求逆示例代码）。

# 五、应急场景处理（仓库损坏 / 数据丢失）
## 场景 1：WSL 本地仓库损坏，无法打开或执行命令
### (1)从 Windows 本地备份恢复：
```bash
# 1. 删除损坏的本地仓库
rm -rf ~/cs-study
# 2. 从 D 盘备份目录恢复
cp -r /mnt/d/WSL_Backup/cs-study ~/
# 3. 进入恢复后的仓库，验证状态
cd ~/cs-study
git st
```
### (2)若 Windows 备份也丢失，从 GitHub 远程仓库克隆：
```bash
git clone git@github.com:dao019/cs-study.git ~/cs-study
```
## 场景 2：GitHub 远程仓库误操作（如网页删文件、分支丢失）
```bash
# 进入 WSL 本地仓库，执行强制推送，用本地版本覆盖远程：
cd ~/cs-study
git acp "【恢复远程】覆盖网页误操作内容"
# 原理：本地仓库的提交记录和文件内容比远程完整，强制推送会用本地正确版本替换远程错误内容。
```

# 六、如何创建文件？（WSL 终端一键创建）
```bash
cd ~/cs-study
nano 操作清单.md
# 复制上面的所有内容，粘贴到文件中
# 按下 Ctrl+O → 回车 → Ctrl+X 保存并退出
```

# 七、如何快速查看？（日常学习时随时查阅）
```bash
cd ~/cs-study
cat 操作清单.md  # 终端快速查看
vim 操作清单.md   # 终端编辑查看
code 操作清单.md  # VS Code 图形化查看（推荐）
```